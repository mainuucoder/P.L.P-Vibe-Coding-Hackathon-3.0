{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Rwanda | GTS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      content="Premium Multipurpose Admin & Dashboard Template"
      name="description"
    />
    <meta content="Themesdesign" name="author" />
    <!-- App favicon -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <!--- for populating data in charts-->

    <!-- <link rel="shortcut icon" href="{% static 'dashboard/assets/assets/images/favicon.ico' %}"/> -->

    <!-- jquery.vectormap css -->
    <!-- <link href="{% static 'dashboard/assets/libs/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.css' %}" rel="stylesheet" type="text/css" /> -->

    <!-- DataTables -->
    <!-- <link href="{% static 'dashboard/assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css' %}" rel="stylesheet" type="text/css" /> -->

    <!-- Responsive datatable examples -->
  <!-- <link href="{% static 'dashboard/assets/libs/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css' %}" rel="stylesheet" type="text/css" />  -->

    <!-- Bootstrap Css -->
  <link href="{% static 'dashboard/assets/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css" /> 
    <!-- Icons Css -->
  <link href="{% static 'dashboard/assets/css/icons.min.css' %}" rel="stylesheet" type="text/css" /> 
    <!-- App Css-->
  <link href="{% static 'dashboard/assets/css/app.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'notify/notify.css' %}" rel="stylesheet" />
    <script
      type="text/javascript"
      src="{% static 'notify/jquery-2.1.4.js' %}"
    ></script>
    <!-- include the notif-js -->
    <script
      type="text/javascript"
      src="{% static 'notify/notify.js' %}"
    ></script>
    <style>
      
      .btn-custom {
        background-color: #0574b9;
        color: #fff;
      }
      .fa-edit {
        color: green;
      }
      .fa-trash {
        color: red;
      }
      .btn-custom:hover {
        background-color: #2db066;
        color: #fff;
      }
      .card-footer {
        background-color: #cdebfe;
      }
      .icon-success {
        font-size: 23px;
        color: green;
        font-weight: bold;
      }
      .icon-delete {
        font-size: 23px;
        color: red;
        font-weight: bold;
      }
      .icon-view {
        font-size: 23px;
        color: blue;
        font-weight: bold;
      }
      .icon-image {
        font-size: 23px;
        color: #1b2652;
        font-weight: bold;
      }
      .menu-btns {
        cursor: pointer;
      }
      .menu-btns:hover {
        background-color: #1b2652;
        color: #fff !important;
      }
      /*styles for curstom form header and labels */
      .headers {
        font-size: 20px;
        text-align: center;
        text-transform: uppercase;
        font-weight: bold;
      }
      .min-headers {
        font-size: 16px;
        text-transform: uppercase;
        font-weight: bold;
      }
      .form_label {
        font-size: 14px;
        text-transform: uppercase;
        font-weight: bold;
      }
      .btn {
        padding: 4px 9px;
        font-size: 13px;
      }
      .main_header_display{
  font-size: 11px !important;
  text-align: left !important;
  font-family:"Roboto", sans-serif !important;
  
}
      /*end of styles for curstom form header and labels */
    </style>
  </head>

  <body data-topbar="dark">
    <!-- <body data-layout="horizontal" data-topbar="dark"> -->

    <!-- Begin page -->
    <div id="layout-wrapper">
      <header id="page-topbar">
        <div class="navbar-header">
          <div class="d-flex">
            <!-- LOGO -->
            <div
              class="navbar-brand-box"
              style="background-color: #fff; border-bottom: solid #106eea 3px"
            >
              <a href="{% url 'dashboard' %}" class="logo logo-dark">
                <span class="logo-sm">
                  <img
                    src="{% static 'assets/imgs/08.png' %}"
                    alt="logo-sm-dark"
                    style="width: 100%"
                  />
                </span>
                <span class="logo-lg">
                  <img
                    src="{% static 'assets/imgs/08.png' %}"
                    alt="logo-dark"
                    style="width: 100%"
                  />
                </span>
              </a>

              <a href="{% url 'dashboard' %}" class="logo logo-light">
                <span class="logo-sm">
                  <img
                    src="{% static 'assets/imgs/08.png' %}"
                    alt="logo-sm-light"
                    style="width: 20%"
                  />
                </span>
                <span class="logo-lg">
                  <img
                    src="{% static 'assets/imgs/08.png' %}"
                    alt="logo-light"
                    style="width: 100%"
                  />
                </span>
              </a>
            </div>

            <button
              type="button"
              class="btn btn-sm px-3 font-size-24 header-item waves-effect"
              id="vertical-menu-btn"
            >
              <i class="ri-menu-2-line align-middle" style="color: #fff"></i>
            </button>
          </div>

          <div class="d-flex">
            <div class="dropdown d-inline-block d-lg-none">
              <button
                type="button"
                class="btn header-item noti-icon waves-effect"
                id="page-header-search-dropdown"
                data-bs-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <div class="top-icon">
                  <i class="ri-search-line"></i>
                </div>
              </button>
              <div
                class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0"
                aria-labelledby="page-header-search-dropdown"
              >
                <form class="p-3">
                  <div class="m-0">
                    <div class="input-group">
                      <input
                        type="text"
                        class="form-control"
                        placeholder="Search ..."
                      />
                      <button class="btn btn-primary" type="submit">
                        <i class="ri-search-line"></i>
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
            <!-- end -->

            <!-- end -->

            <div class="dropdown d-none d-lg-inline-block">
              <button
                type="button"
                class="btn header-item noti-icon waves-effect"
                data-toggle="fullscreen"
              >
                <div class="top-icon">
                  <i class="mdi mdi-fullscreen"></i>
                </div>
              </button>
            </div>
            <!-- end  -->

            <div class="dropdown d-inline-block user-dropdown">
              <button
                type="button"
                class="btn header-item waves-effect"
                id="page-header-user-dropdown"
                data-bs-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <span class="d-none d-xl-inline-block ms-1" style="color: white"
                  >{{user.first_name}} {{user.last_name}}</span
                >
                <i class="mdi mdi-chevron-down d-none d-xl-inline-block"></i>
              </button>
              <div class="dropdown-menu dropdown-menu-end">
                <!-- item-->
                <a class="dropdown-item" href="#"
                  ><i class="ri-user-line align-middle me-1"></i> Profile</a
                >
                <a class="dropdown-item d-block" href="#"
                  ><i class="ri-settings-2-line align-middle me-1"></i> Change
                  Password</a
                >

                <div class="dropdown-divider"></div>
                <a
                  class="dropdown-item text-danger"
                  href="{% url 'account_logout' %}"
                  ><i
                    class="ri-shut-down-line align-middle me-1 text-danger"
                  ></i>
                  Logout</a
                >
              </div>
            </div>
            <!-- end user -->
          </div>
        </div>
      </header>

      <!-- ========== Left Sidebar Start ========== -->
      <div class="vertical-menu">
        <div data-simplebar class="h-100">
          <!--- Sidemenu -->
          <div id="sidebar-menu">
            <!-- Left Menu Start -->
            <ul class="metismenu list-unstyled" id="side-menu">
              <li class="menu-title">Menu</li>

              <li>
                <a href="{% url 'dashboard' %}" class="waves-effect">
                  <i class="ri-dashboard-line"></i>
                  <span>Dashboard</span>
                </a>
              </li>

              <!-- end li -->
              {% if user.is_ict_admin or user.is_admin %}
              <li>
                <a href="javascript: void(0);" class="has-arrow waves-effect">
                  <i class="ri-store-2-line"></i>
                  <span>Organizations</span>
                </a>
                <ul class="sub-menu" aria-expanded="false">
                  <li>
                    <a
                      role="/institution-categorization/"
                      class="menu-btns waves-effect"
                      >Categories</a
                    >
                  </li>
                  <li>
                    <a
                      role="/institution-ownerships/"
                      class="menu-btns waves-effect"
                      >Institution Ownerships</a
                    >
                  </li>
                  <li>
                    <a role="/institution-types/" class="menu-btns waves-effect"
                      >Institution Types</a
                    >
                  </li>
                  <li>
                    <a role="/institutions/" class="menu-btns waves-effect"
                      >Institutions</a
                    >
                  </li>
                </ul>
              </li>
              {% endif %}
              <li>
                <a href="javascript: void(0);" class="has-arrow waves-effect">
                  <i class="ri-store-2-line"></i>
                  <span>Questions Databank</span>
                </a>
                <ul class="sub-menu" aria-expanded="false">
                  {% if user.is_ict_admin or user.is_admin %}
                  <li>
                    <a
                      role="/question-categories/"
                      class="menu-btns waves-effect"
                      >Question Categories</a
                    >
                  </li>
                  <li>
                    <a role="/question-types/" class="menu-btns waves-effect"
                      >Question Types</a
                    >
                  </li>
                  {% endif %}
                  <li>
                    <a
                      role="/viewQuestions/"
                      class="menu-btns waves-effect"
                      >Databank Questions</a
                    >
                  </li>
                  
                </ul>
              </li>
              
              <li>

                <a role="/viewSurveys/" class="menu-btns waves-effect">
                  <i class="ri-dashboard-line"></i>
                  <span>Manage Surveys</span>
                </a>
              </li>
              <li>
                <a role="/ManageUsers/" class="menu-btns waves-effect">
                  <i class="ri-dashboard-line"></i>
                  <span>Manage Users</span>
                </a>
              </li>
              <li>
                <a href="/" class="waves-effect" >
                  <i class="ri-dashboard-line"></i>
                  <span>Public Website </span>
                </a>
              </li>
              <li>
                <a href="{% url 'account_logout' %}" class="waves-effect" >
                  <i class="ri-dashboard-line"></i>
                  <span>Logout </span>
                </a>
              </li>

              <!-- <li>
                <a href="javascript: void(0);" class="has-arrow waves-effect">
                  <i class="ri-store-2-line"></i>
                  <span>Surveys</span>
                </a>
                <ul class="sub-menu" aria-expanded="false">
                  <li>
                    <a
                      role="surveys/viewSurveys/"
                      class=" waves-effect"
                      >Surveys</a
                    >
                  </li>
                  <li>
            <a class="menu-btns" role="surveys/create_survey/">
              <i class="bi bi-circle"></i><span>Add Survey</span>
            </a>
          </li>
                </ul>
              </li> -->
            
          <!-- </li>
             -->
            </ul>
            <!-- end ul -->
          </div>
          <!-- Sidebar -->
        </div>
      </div>
      <!-- Left Sidebar End -->

      <!-- ============================================================== -->
      <!-- Start right Content here -->
      <!-- ============================================================== -->
      <div class="main-content">
        <div class="page-content">
          <div class="container-fluid">
            <!-- start page title -->
            <div class="row">
              <div class="col-12">
                <div
                  class="page-title-box d-flex align-items-center justify-content-between"
                >
                  <h4 class="mb-0">{% if institution %}{{institution.name}}{% else %}Admin {% endif %}</h6></h4>
                  
                  <div class="page-title-right">
                    <ol class="breadcrumb m-0">
                      
                      <li class="breadcrumb-item active">Dashboard</li>
                    </ol>
                    <!-- end ol -->
                  </div>
                  
                </div>
              </div>
              <!-- end col -->
            </div>
            <!-- end row -->
            <!-- end page title -->
            <div class="content-wrapper section dashboard">
              <!-- {% if messages %} {% for message in messages %}
              <script>
                notify("{{message.level_tag}}", "{{message}}");
              </script>

              {% endfor %} {% endif %} -->
              
              {% block content %} {% endblock %}
            </div>
          </div>
          <!-- end container-fluid -->
        </div>
        <!-- End Page-content -->

        <footer class="footer">
          <div class="container-fluid">
            <div class="row">
              <div class="col-sm-6">
                <script>
                  document.write(new Date().getFullYear());
                </script>
                © GTS.
              </div>
              <div class="col-sm-6">
                <div class="text-sm-end d-none d-sm-block">
                  Powered  <i class="mdi mdi-heart text-danger"></i> by
                  Rwanda Development Board
                </div>
              </div>
            </div>
          </div>
        </footer>
      </div>
      <!-- end main content-->
    </div>
    <!-- END layout-wrapper -->

    <!-- Right Sidebar -->
  
    <!-- /Right-bar -->

    <!-- Right bar overlay-->
    <div class=" col-sm-12 col-xs-12 not_shown" style="display: none;" id="loader">
      <img src="{% static '/assets/images/loader1.gif' %}"  id="loaderimg">
  </div>
    <div class="rightbar-overlay"></div>

    <!-- JAVASCRIPT -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="{% static 'dashboard/assets/libs/jquery/jquery.min.js' %}"></script>
    <script src="{% static 'dashboard/assets/libs/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
   
    <script src="{% static 'dashboard/assets/libs/metismenu/metisMenu.min.js' %}"></script>
    <script src="{% static 'dashboard/assets/libs/simplebar/simplebar.min.js' %}"></script>
    <script src="{% static 'dashboard/assets/libs/node-waves/waves.min.js' %}"></script>
    <script src="{%  static 'jquery-nice-select/js/jquery.nice-select.min.js' %}"></script>
    <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />
    <script src="{% static 'frontend/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js' %}"></script>
    <script src="{% static 'frontend/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js' %}"></script>
    <!-- apexcharts -->
    <script src="{% static 'dashboard/assets/libs/apexcharts/apexcharts.min.js' %}"></script>

    <!-- jquery.vectormap map -->
    <script src="{% static 'dashboard/assets/libs/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.min.js' %}"></script>
    <script src="{% static 'dashboard/assets/libs/admin-resources/jquery.vectormap/maps/jquery-jvectormap-us-merc-en.js' %}"></script>

    <!-- Required datatable js -->
    <!-- <script src="{% static 'dashboard/assets/libs/datatables.net/js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'dashboard/assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js' %}"></script> -->

    <!-- Responsive examples -->
    <!-- <script src="{% static 'dashboard/assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js' %}"></script>
    <script src="{% static 'dashboard/assets/libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js' %}"></script> -->

    <script src="{% static 'dashboard/assets/js/pages/dashboard.init.js' %}"></script>
    
    <!-- App js -->
    <script src="{% static 'dashboard/assets/js/app.js' %}"></script>
<script src="{% static 'datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'datatables/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'datatables/dataTables.buttons.min.js' %}"></script>
<script src="{% static 'datatables/buttons.bootstrap4.min.js' %}"></script>
<script src="{% static 'datatables/jszip.min.js' %}"></script>
<script src="{% static 'datatables/pdfmake.min.js' %}"></script>
<script src="{% static 'datatables/vfs_fonts.js' %}"></script>
<script src="{% static 'datatables/buttons.html5.min.js' %}"></script>
<script src="{% static 'datatables/buttons.print.min.js' %}"></script>
<script src="{% static 'datatables/buttons.colVis.min.js' %}"></script>
    
    
    {% block extra_js %} {% endblock %}
    <script>
      $(document).ready(function () {
        $('.loadtable').DataTable({
      dom: 'lBfrtip',
      "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
      "search": {
        "className": 'form-inline'
      },
          buttons: [
              { extend: 'copy', className: 'btn btn-primary glyphicon glyphicon-duplicate',style: 'height: 20px;padding:0 10px !important;width:10px' },
              { extend: 'csv', className: 'btn btn-primary glyphicon glyphicon-save-file',style: 'height: 20px;;padding:0 10px !important;width:10px' },
              { extend: 'excel', className: 'btn btn-primary glyphicon glyphicon-list-alt',style: 'height: 20px;;padding:0 10px !important;width:10px' },
              { extend: 'pdf', className: 'btn btn-primary glyphicon glyphicon-file' },
              { extend: 'print', className: 'btn btn-primary glyphicon glyphicon-print',style: 'height: 20px;;padding:0 10px!important;width:10px' },

             

          ],
          columnDefs: [
              { "visible": false, "targets": [] }
          ],
          "bLengthChange" : false, //thought this line could hide the LengthMenu
          // "bInfo":false,   
      });
        // a click event listener to all the menu-btns
        $(".menu-btns").click(function () {
          var URL = $(this).attr("role");
           if (URL=='/viewSurveys/'){
            window.location=URL
           }else{
            $.get(URL, function (data) {
            $("#modal-staff").modal("hide");
            $(".content-wrapper").html(data);
          });
           }
          
        });

        // end of event listener  menu-btns
      });

      // action for processing forms
      $(document).on("submit", "#DefaultForm", function (e) {
        var FormAction = $(this).attr("role");
        var redirect_url=$(this).attr('name')
        $("#SubmitQuery").unbind();
        e.preventDefault();
        var formData = new FormData($("#DefaultForm")[0]);
        $.ajax({
          url: FormAction,
          method: "POST",
          data: formData,
          contentType: false,
          cache: false,
          processData: false,
          success: function (response) {
            if ($.trim(response)=='redirect'){
             window.location=redirect_url
            }else{
            $("#modal-staff").modal("hide");
            $(".content-wrapper").html(response);
            }
           
          },
        });
      });
    </script>
  </body>
</html>
